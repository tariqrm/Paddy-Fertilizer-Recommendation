-- Database: NewDB
CREATE DATABASE "NewDB"
    WITH
    OWNER = postgres
    ENCODING = 'UTF8'
    LC_COLLATE = 'English_United States.1252'
    LC_CTYPE = 'English_United States.1252'
    LOCALE_PROVIDER = 'libc'
    TABLESPACE = pg_default
    CONNECTION LIMIT = -1
    IS_TEMPLATE = False;

-- Create basestation table if it does not exist
CREATE TABLE IF NOT EXISTS basestation (
    ID VARCHAR(50) PRIMARY KEY,
    Date VARCHAR(6),
    Time VARCHAR(4),
    BSID VARCHAR(10),
    UserName VARCHAR(50),
    Corners TEXT
);

-- Insert data into basestation table
INSERT INTO basestation (ID, Date, Time, BSID, UserName, Corners)
VALUES 
('27TH06L6973L7942', '270624', '1200', 'BS2100', 'Tariq', '6.973825811573967, 79.94275298402157; 6.973432352918095, 79.9429919566374; 6.97389546689967, 79.94415647398762; 6.974268216844931, 79.94412802486667');

-- Create dataset table if it does not exist
CREATE TABLE IF NOT EXISTS dataset (
    ID VARCHAR(50),
    Latitude DECIMAL(10, 8),
    Longitude DECIMAL(11, 8),
    Moisture DECIMAL(4, 1),
    Temperature DECIMAL(4, 1),
    EC DECIMAL(5, 0),
    Ph DECIMAL(3, 1),
    Nitrogen DECIMAL(3, 0),
    Phosphorous DECIMAL(3, 0),
    Potassium DECIMAL(3, 0)
);

-- Drop all data from dataset table
TRUNCATE TABLE dataset;

-- Insert new data into dataset table
INSERT INTO dataset (ID, Latitude, Longitude, Moisture, Temperature, EC, Ph, Nitrogen, Phosphorous, Potassium)
VALUES 
('27TH06L6973L7942', 6.973683543, 79.94288898, 19.5, 32.8, 219, 7.1, 19, 130, 115),
('27TH06L6973L7942', 6.973782356, 79.94294835, 16.9, 32.8, 218, 7.9, 23, 130, 119),
('27TH06L6973L7942', 6.973881169, 79.94300771, 17.9, 32.7, 214, 7.4, 17, 125, 110),
('27TH06L6973L7942', 6.973541271, 79.94302497, 16.4, 32.6, 220, 7.4, 5, 25, 113),
('27TH06L6973L7942', 6.973640084, 79.94308434, 12.7, 32.6, 95, 7.6, 7, 117, 116),
('27TH06L6973L7942', 6.973738898, 79.94314371, 9.5, 33, 101, 7.3, 12, 106, 107),
('27TH06L6973L7942', 6.973837713, 79.94320308, 9.1, 32.9, 195, 7.7, 9, 107, 92),
('27TH06L6973L7942', 6.97393653, 79.94326244, 3.1, 32.8, 117, 6.3, 9, 106, 91),
('27TH06L6973L7942', 6.973596623, 79.9432797, 6.4, 32, 106, 8.3, 14, 145, 130),
('27TH06L6973L7942', 6.973695438, 79.94333907, 19.5, 32.8, 219, 7.1, 19, 130, 115),
('27TH06L6973L7942', 6.973794255, 79.94339844, 16.9, 32.8, 218, 7.9, 23, 130, 119),
('27TH06L6973L7942', 6.973893073, 79.94345781, 17.9, 32.7, 214, 7.4, 17, 125, 110),
('27TH06L6973L7942', 6.973991892, 79.94351718, 16.4, 32.6, 220, 7.4, 5, 25, 113),
('27TH06L6973L7942', 6.973651977, 79.94353443, 12.7, 32.6, 95, 7.6, 7, 117, 116),
('27TH06L6973L7942', 6.974090713, 79.94357654, 9.5, 33, 101, 7.3, 12, 106, 107),
('27TH06L6973L7942', 6.973750795, 79.9435938, 9.1, 32.9, 195, 7.7, 9, 107, 92),
('27TH06L6973L7942', 6.973849615, 79.94365317, 3.1, 32.8, 117, 6.3, 9, 106, 91),
('27TH06L6973L7942', 6.973948436, 79.94371254, 6.4, 32, 106, 8.3, 14, 145, 130),
('27TH06L6973L7942', 6.974047258, 79.94377191, 19.5, 32.8, 219, 7.1, 19, 130, 115),
('27TH06L6973L7942', 6.974146081, 79.94383127, 16.9, 32.8, 218, 7.9, 23, 130, 119),
('27TH06L6973L7942', 6.973806155, 79.94384853, 17.9, 32.7, 214, 7.4, 17, 125, 110),
('27TH06L6973L7942', 6.973904977, 79.9439079, 16.4, 32.6, 220, 7.4, 5, 25, 113),
('27TH06L6973L7942', 6.974003801, 79.94396727, 12.7, 32.6, 95, 7.6, 7, 117, 116),
('27TH06L6973L7942', 6.974102626, 79.94402664, 9.5, 33, 101, 7.3, 12, 106, 107),
('27TH06L6973L7942', 6.974201452, 79.944086, 9.1, 32.9, 195, 7.7, 9, 107, 92);


-- Create the login table
CREATE TABLE login (
    email VARCHAR(255) PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    password VARCHAR(255) NOT NULL
);


-- Insert data into basestation table
INSERT INTO basestation (ID, Date, Time, BSID, UserName, Corners)
VALUES 
('28FR06L6927L7994', '280624', '1000', 'BS2100', 'Tariq', '6.9729560224980185, 79.94340628476984; 6.973513477773138, 79.94464002128153; 6.973034379705265, 79.94488361094014; 6.972434387041399, 79.94354386781775');


-- Insert new data into dataset table
INSERT INTO dataset (ID, Latitude, Longitude, Moisture, Temperature, EC, Ph, Nitrogen, Phosphorous, Potassium)
VALUES 
('28FR06L6927L7994', 6.97271492, 79.94348291, 19.5, 32.8, 219, 7.1, 19, 130, 115),
('28FR06L6927L7994', 6.972813732, 79.94354228, 16.9, 32.8, 218, 7.9, 23, 130, 119),
('28FR06L6927L7994', 6.972473814, 79.94355954, 17.9, 32.7, 214, 7.4, 17, 125, 110),
('28FR06L6927L7994', 6.972912546, 79.94360165, 16.4, 32.6, 220, 7.4, 5, 25, 113),
('28FR06L6927L7994', 6.972572626, 79.94361891, 12.7, 32.6, 95, 7.6, 7, 117, 116),
('28FR06L6927L7994', 6.973011361, 79.94366102, 9.5, 33, 101, 7.3, 12, 106, 107),
('28FR06L6927L7994', 6.972671438, 79.94367827, 9.1, 32.9, 195, 7.7, 9, 107, 92),
('28FR06L6927L7994', 6.972770252, 79.94373764, 3.1, 32.8, 117, 6.3, 9, 106, 91),
('28FR06L6927L7994', 6.972869068, 79.94379701, 6.4, 32, 106, 8.3, 14, 145, 130),
('28FR06L6927L7994', 6.972967884, 79.94385638, 19.5, 32.8, 219, 7.1, 19, 130, 115),
('28FR06L6927L7994', 6.972627955, 79.94387364, 16.9, 32.8, 218, 7.9, 23, 130, 119),
('28FR06L6927L7994', 6.973066701, 79.94391575, 17.9, 32.7, 214, 7.4, 17, 125, 110),
('28FR06L6927L7994', 6.97272677, 79.943933, 16.4, 32.6, 220, 7.4, 5, 25, 113),
('28FR06L6927L7994', 6.97316552, 79.94397511, 12.7, 32.6, 95, 7.6, 7, 117, 116),
('28FR06L6927L7994', 6.972825587, 79.94399237, 9.5, 33, 101, 7.3, 12, 106, 107),
('28FR06L6927L7994', 6.972924405, 79.94405174, 9.1, 32.9, 195, 7.7, 9, 107, 92),
('28FR06L6927L7994', 6.973023224, 79.94411111, 3.1, 32.8, 117, 6.3, 9, 106, 91),
('28FR06L6927L7994', 6.973122045, 79.94417048, 6.4, 32, 106, 8.3, 14, 145, 130),
('28FR06L6927L7994', 6.972782105, 79.94418774, 19.5, 32.8, 219, 7.1, 19, 130, 115),
('28FR06L6927L7994', 6.973220866, 79.94422985, 16.9, 32.8, 218, 7.9, 23, 130, 119),
('28FR06L6927L7994', 6.972880925, 79.9442471, 17.9, 32.7, 214, 7.4, 17, 125, 110),
('28FR06L6927L7994', 6.973319689, 79.94428921, 16.4, 32.6, 220, 7.4, 5, 25, 113),
('28FR06L6927L7994', 6.972979745, 79.94430647, 12.7, 32.6, 95, 7.6, 7, 117, 116),
('28FR06L6927L7994', 6.973078567, 79.94436584, 9.5, 33, 101, 7.3, 12, 106, 107),
('28FR06L6927L7994', 6.973177391, 79.94442521, 9.1, 32.9, 195, 7.7, 9, 107, 92),
('28FR06L6927L7994', 6.972837442, 79.94444247, 19.5, 32.8, 219, 7.1, 19, 130, 115),
('28FR06L6927L7994', 6.973276215, 79.94448458, 16.9, 32.8, 218, 7.9, 23, 130, 119),
('28FR06L6927L7994', 6.972936265, 79.94450184, 17.9, 32.7, 214, 7.4, 17, 125, 110),
('28FR06L6927L7994', 6.97337504, 79.94454395, 16.4, 32.6, 220, 7.4, 5, 25, 113),
('28FR06L6927L7994', 6.973035088, 79.9445612, 9.5, 33, 101, 7.3, 12, 106, 107),
('28FR06L6927L7994', 6.973473867, 79.94460331, 9.1, 32.9, 195, 7.7, 9, 107, 92),
('28FR06L6927L7994', 6.973133913, 79.94462057, 3.1, 32.8, 117, 6.3, 9, 106, 91),
('28FR06L6927L7994', 6.973232739, 79.94467994, 6.4, 32, 106, 8.3, 14, 145, 130),
('28FR06L6927L7994', 6.972991607, 79.94475657, 19.5, 32.8, 219, 7.1, 19, 130, 115),
('28FR06L6927L7994', 6.973090433, 79.94481594, 16.9, 32.8, 218, 7.9, 23, 130, 119);

-- Create Users table
CREATE TABLE users (
    user_id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password VARCHAR(100) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Create Posts table
CREATE TABLE posts (
    post_id SERIAL PRIMARY KEY,
    user_id INT NOT NULL,
    title VARCHAR(255) NOT NULL,
    body TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE CASCADE
);

-- Create Comments table
CREATE TABLE comments (
    comment_id SERIAL PRIMARY KEY,
    post_id INT NOT NULL,
    user_id INT NOT NULL,
    comment_body TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (post_id) REFERENCES posts (post_id) ON DELETE CASCADE,
    FOREIGN KEY (user_id) REFERENCES users (user_id) ON DELETE CASCADE
);